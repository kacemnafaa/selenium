package testCases;// Generated by Selenium IDE

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.Select;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;

import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.concurrent.TimeUnit;

public class FormulaireTestCase {
  private WebDriver driver;
  private Map<String, Object> vars;
  JavascriptExecutor js;
  @BeforeClass
  public void setUp() {

    System.setProperty("webdriver.chrome.driver", "D://webdriver//chromedriver.exe");
    driver = new ChromeDriver();
    js = (JavascriptExecutor) driver;
    vars = new HashMap<String, Object>();
  }
  @AfterClass
  public void tearDown() {
    driver.quit();
  }

  @Test
  public void test() throws InterruptedException {
    // open URL
    driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
    driver.get("https://nxtgenaiacademy.com/demo-site/");

    //first name
    driver.findElement(By.xpath("//input[@name='vfb-5']")).sendKeys("Akram");
    // last name
    driver.findElement(By.xpath("//input[@name='vfb-7']")).sendKeys("my last name");

    //choix du genre
    driver.findElement(By.xpath("//input[@value='Male']")).click();

    //champs adresse
    driver.findElement(By.xpath("//input[@id='vfb-13-address']")).sendKeys("Street Address");
    driver.findElement(By.xpath("//input[@id='vfb-13-address-2']")).sendKeys("address-2");
    driver.findElement(By.xpath("//input[@id='vfb-13-city']")).sendKeys("city");
    driver.findElement(By.xpath("//input[@id='vfb-13-state']")).sendKeys("state");
    driver.findElement(By.xpath("//input[@id='vfb-13-zip']")).sendKeys("zip");

    // select country
    Select myCountry = new Select(driver.findElement(By.xpath("//select[@name='vfb-13[country]']")));
    myCountry.selectByValue("Tunisia");

    // Email
    driver.findElement(By.xpath("//input[@type='email']")).sendKeys("ak@gmail.com");

    // date
    driver.findElement(By.xpath("//input[@name='vfb-18']")).sendKeys("01/02/2020");
    driver.findElement(By.xpath("//input[@name='vfb-18']")).sendKeys(Keys.TAB);

    //convenient time
    Select hours = new Select(driver.findElement(By.xpath("//select[@name='vfb-16[hour]']")));
    hours.selectByValue("05");

    Select minutes = new Select(driver.findElement(By.xpath("//select[@name='vfb-16[min]']")));
    minutes.selectByValue("30");

    //mobile number
    driver.findElement(By.xpath("//input[@name='vfb-19']")).sendKeys("88888888");

    //Course Interested
    driver.findElement(By.xpath("//input[@value='Selenium WebDriver']")).click();

    //query
    driver.findElement(By.xpath("//textarea[@id='vfb-23']")).sendKeys("ceci est un test !");

    //enter any two digits
    driver.findElement(By.xpath("//input[@name='vfb-3']")).sendKeys("99");

    //submit
    driver.findElement(By.xpath("//input[@class='vfb-submit ']")).click();

    WebDriverWait wait =new WebDriverWait(driver,20);
    WebElement confirmationMsg = wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//div[@data-id='7e205e7c']//div[@class='elementor-shortcode']")));

    String toutLeMessage = driver.findElement(By.xpath("(//div[@class='elementor-shortcode'])[1]")).getText();
    System.out.println("toutLeMessage :"+toutLeMessage);

    Assert.assertTrue(toutLeMessage.contains("Registration Form is Successfully Submitted"));

  }
}
